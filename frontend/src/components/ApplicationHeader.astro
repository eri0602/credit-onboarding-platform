---
// Eliminamos: import { SignOut } from 'auth-astro/components';
---

<header class="w-full bg-white shadow-md">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
        
        <a href="/" class="flex items-center space-x-2 text-[#1173D4] font-bold text-xl">
            <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 12l10 10 10-10L12 2zm0 14L6 10h12l-6 6z"/>
            </svg>
            <span class="text-[#111827]">FinanciaPro</span>
        </a>

        <div class="flex items-center space-x-6 relative">
            
            <div class="hidden sm:flex space-x-6 text-sm">
                <a href="/cuenta" class="text-gray-600 hover:text-[#1173D4] font-medium transition duration-150">Cuenta</a>
                <a href="/creditos" class="text-[#1173D4] font-bold transition duration-150">Créditos</a>
            </div>

            <div class="relative">
                <button
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-orange-300 text-white font-semibold overflow-hidden shadow-inner"
                    onclick="document.getElementById('dropdown-menu').classList.toggle('hidden')"
                >
                    <img src="/placeholder-avatar.jpg" alt="Perfil" class="w-full h-full object-cover" />
                </button>

                <div
                    id="dropdown-menu"
                    class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg hidden z-50"
                >
                    <button
                        id="signout-button"
                        class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150"
                        type="button"
                    >
                        Cerrar sesión
                    </button>
                    </div>
            </div>
        </div>
    </nav>
</header>

<script>
    // URL de redirección después de cerrar sesión
    const LOGOUT_REDIRECT_URL = '/login';
    const signoutButton = document.getElementById('signout-button');

    function handleLogout(event: Event): void {
        event.preventDefault();
        
        // 1. Borrar el token de autenticación
        localStorage.removeItem('authToken');
        
        // Opcional: Si usas otros datos de sesión, bórralos aquí.
        // localStorage.removeItem('userEmail'); 

        // 2. Redirigir al usuario
        window.location.href = LOGOUT_REDIRECT_URL;
    }

    // Añadir el Event Listener al botón
    if (signoutButton) {
        signoutButton.addEventListener('click', handleLogout);
    }
</script>